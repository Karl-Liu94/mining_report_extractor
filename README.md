# çŸ¿å±±å‚¨é‡æ ¸å®æŠ¥å‘Šä¿¡æ¯æå–å™¨ ğŸ”ï¸

ä¸€ä¸ªåŸºäº AI å¤§æ¨¡å‹çš„æ™ºèƒ½ PDF æ–‡æ¡£ä¿¡æ¯æå–å·¥å…·ï¼Œä¸“é—¨ç”¨äºä»çŸ¿å±±å‚¨é‡æ ¸å®æŠ¥å‘Šä¸­æå–ç»“æ„åŒ–ä¿¡æ¯ã€‚æ”¯æŒ **Gemini** å’Œ **OpenAI** ä¸¤å¤§ AI æœåŠ¡å•†ï¼Œå…¶ä¸­ OpenAI ç‰ˆæœ¬è¿˜å…·å¤‡å¤šè½®å¯¹è¯åŠŸèƒ½ã€‚

## ğŸŒŸ ä¸»è¦ç‰¹æ€§

- **ğŸ¤– åŒ AI æ”¯æŒ**ï¼šæ”¯æŒ Google Gemini å’Œ OpenAI ä¸¤å¤§ AI æœåŠ¡å•†
- **ğŸ’¬ æ™ºèƒ½å¯¹è¯**ï¼šOpenAI ç‰ˆæœ¬æ”¯æŒåŸºäºæŠ¥å‘Šå†…å®¹çš„å¤šè½®é—®ç­”å¯¹è¯
- **ğŸ¯ çµæ´»æ¨¡å‹é€‰æ‹©**ï¼šæä¾›é¢„è®¾æ¨¡å‹åˆ—è¡¨ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¨¡å‹åç§°
- **ğŸ“„ æ™ºèƒ½ PDF è§£æ**ï¼šå¼ºå¤§çš„æ–‡æ¡£ç†è§£å’Œä¿¡æ¯æå–èƒ½åŠ›
- **ğŸ”§ ç»Ÿä¸€ API æ¥å£**ï¼šæ— è®ºä½¿ç”¨å“ªç§ AIï¼Œè°ƒç”¨æ–¹å¼å®Œå…¨ä¸€è‡´
- **ğŸ—‚ï¸ ç»“æ„åŒ–è¾“å‡º**ï¼šä½¿ç”¨ Pydantic æ¨¡å‹ç¡®ä¿æ•°æ®è´¨é‡å’Œä¸€è‡´æ€§
- **ğŸ‡¨ğŸ‡³ ä¸­æ–‡ä¼˜åŒ–**ï¼šä¸“é—¨é’ˆå¯¹ä¸­æ–‡çŸ¿å±±æŠ¥å‘Šè¿›è¡Œä¼˜åŒ–
- **ğŸ’ å¤šçŸ¿ç§æ”¯æŒ**ï¼šæ”¯æŒä¸»çŸ¿ç§å’Œä¼´ç”ŸçŸ¿ç§çš„èµ„æºé‡ç»Ÿè®¡
- **ğŸ“Š å®Œæ•´ä¿¡æ¯è¦†ç›–**ï¼šæå–æŠ¥å‘Šä¿¡æ¯ã€çŸ¿æƒä¿¡æ¯ã€èµ„æºä¿¡æ¯ã€çŸ¿ä½“åˆ†å¸ƒç­‰å…¨é¢æ•°æ®
- **ğŸ”’ å®‰å…¨é…ç½®**ï¼šä½¿ç”¨ .env æ–‡ä»¶ç»Ÿä¸€ç®¡ç† API å¯†é’¥

## ğŸ“‹ æå–ä¿¡æ¯ç±»å‹

### æŠ¥å‘Šä¿¡æ¯
- æŠ¥å‘Šåç§°
- ç¼–åˆ¶å•ä½
- ç¼–åˆ¶æ—¥æœŸ

### çŸ¿æƒä¿¡æ¯
- çŸ¿æƒåç§°ã€ä½ç½®ã€ç¼–å·
- å‹˜æŸ¥ç¨‹åº¦ï¼ˆæ™®æŸ¥/è¯¦æŸ¥/å‹˜æ¢ï¼‰
- çŸ¿æƒç±»å‹ï¼ˆæ¢çŸ¿æƒ/é‡‡çŸ¿æƒï¼‰
- çŸ¿æƒèµ·å§‹/æˆªæ­¢æ—¥æœŸ
- ç”Ÿäº§è§„æ¨¡ã€çŸ¿åŒºé¢ç§¯ã€çŸ¿åŒºæµ·æ‹”
- ä»¥å¾€å‹˜æŸ¥å·¥ä½œ

### èµ„æºä¿¡æ¯
- çŸ¿ç§ï¼ˆé‡‘çŸ¿ã€é“œçŸ¿ã€é“¶çŸ¿ç­‰ï¼‰
- èµ„æºé‡åˆ†ç±»ç»Ÿè®¡ï¼š
  - æ¨æ–­èµ„æºé‡ï¼ˆ333ç±»åˆ«ï¼‰
  - æ§åˆ¶èµ„æºé‡ï¼ˆ332ç±»åˆ«ï¼‰
  - æ¢æ˜èµ„æºé‡ï¼ˆ331ç±»åˆ«ç­‰ï¼‰
  - æ€»è®¡
- æ¯ä¸ªç±»åˆ«åŒ…å«ï¼šçŸ¿çŸ³é‡ã€é‡‘å±é‡ã€å“ä½

### çŸ¿ä½“åˆ†å¸ƒä¿¡æ¯
- çŸ¿ä½“ç¼–å·ã€åç§°
- çŸ¿ä½“å‡ ä½•ç‰¹å¾ï¼ˆé•¿åº¦ã€å®½åº¦ã€åšåº¦ã€èµ°å‘ã€å€¾è§’ï¼‰
- çŸ¿ä½“è§„æ¨¡ï¼ˆé¢ç§¯ã€ä½“ç§¯ï¼‰
- çŸ¿ä½“èµ„æºé‡ï¼ˆçŸ¿çŸ³é‡ã€é‡‘å±é‡ã€å“ä½ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Google Gemini API å¯†é’¥ æˆ– OpenAI API å¯†é’¥ï¼ˆè‡³å°‘ä¸€ä¸ªï¼‰

### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### é…ç½® API å¯†é’¥

åˆ›å»º `.env` æ–‡ä»¶å¹¶å¡«å…¥æ‚¨çš„ API å¯†é’¥ï¼š

```bash
# API å¯†é’¥é…ç½®æ–‡ä»¶
# è¯·å¡«å…¥æ‚¨çš„å®é™… API å¯†é’¥

# OpenAI API å¯†é’¥ï¼ˆæ”¯æŒå¯¹è¯åŠŸèƒ½ï¼‰
OPENAI_API_KEY=your_openai_api_key_here

# Gemini API å¯†é’¥
GEMINI_API_KEY=your_gemini_api_key_here
```

### äº¤äº’å¼ä½¿ç”¨ï¼ˆæ¨èï¼‰

è¿è¡Œä¸»ç¨‹åºï¼š
```bash
python mining_report_extractor_with_conversation.py
```

ç¨‹åºæµç¨‹ï¼š
1. é€‰æ‹© AI æœåŠ¡å•†ï¼ˆGemini/OpenAIï¼‰
2. é€‰æ‹©æå–æ¨¡å‹
3. è¾“å…¥ PDF æ–‡ä»¶è·¯å¾„
4. è‡ªåŠ¨æå–å¹¶æ˜¾ç¤ºç»“æœ
5. **ï¼ˆä»… OpenAIï¼‰** é€‰æ‹©æ˜¯å¦è¿›å…¥å¯¹è¯æ¨¡å¼
6. **ï¼ˆå¦‚è¿›å…¥å¯¹è¯ï¼‰** é€‰æ‹©å¯¹è¯æ¨¡å‹å¹¶å¼€å§‹é—®ç­”

### ç¼–ç¨‹å¼ä½¿ç”¨

```python
from mining_report_extractor_with_conversation import create_extractor

# æ–¹å¼1ï¼šäº¤äº’å¼é€‰æ‹©
extractor = create_extractor()
result = extractor.extract_from_file("your_report.pdf")

# æ–¹å¼2ï¼šç›´æ¥æŒ‡å®š
extractor = create_extractor("gemini", "gemini-2.5-flash")
result = extractor.extract_from_file("your_report.pdf")

# æ–¹å¼3ï¼šOpenAI å¸¦å¯¹è¯åŠŸèƒ½
extractor = create_extractor("openai", "o4-mini")
result = extractor.extract_from_file("your_report.pdf")
# å¯åŠ¨å¯¹è¯ï¼ˆå¯é€‰æ‹©ä¸åŒæ¨¡å‹ï¼‰
extractor.start_conversation("o3-pro")
```

## ğŸ’¬ å¯¹è¯åŠŸèƒ½ç‰¹æ€§

**ä»… OpenAI ç‰ˆæœ¬æ”¯æŒ**

- **å¤šè½®å¯¹è¯**ï¼šåŸºäºå·²ä¸Šä¼ çš„æŠ¥å‘Šå†…å®¹è¿›è¡Œè¿ç»­é—®ç­”
- **ä¸Šä¸‹æ–‡è®°å¿†**ï¼šAI ä¼šè®°ä½ä¹‹å‰çš„é—®ç­”å†å²
- **æ¨¡å‹åˆ‡æ¢**ï¼šå¯ä¸ºå¯¹è¯é€‰æ‹©ä¸åŒäºæå–çš„æ¨¡å‹
- **ä¸“ä¸šå›ç­”**ï¼šåŸºäºåœ°è´¨å’ŒçŸ¿ä¸šé¢†åŸŸä¸“ä¸šçŸ¥è¯†å›ç­”é—®é¢˜

### å¯¹è¯ç¤ºä¾‹

```
ğŸ™‹ æ‚¨çš„é—®é¢˜: è¿™ä¸ªçŸ¿å±±çš„é‡‘çŸ¿èµ„æºé‡æœ‰å¤šå°‘ï¼Ÿ

ğŸ¤– AIå›ç­”:
æ ¹æ®æŠ¥å‘Šå†…å®¹ï¼Œè¯¥é‡‘çŸ¿çš„æ€»èµ„æºé‡ä¸ºï¼š
- çŸ¿çŸ³é‡ï¼š23.5ä¸‡å¨
- é‡‘å±é‡ï¼š965å…¬æ–¤
- å¹³å‡å“ä½ï¼š4.11å…‹/å¨

ğŸ™‹ æ‚¨çš„é—®é¢˜: è¿™ä¸ªå“ä½åœ¨è¡Œä¸šå†…ç®—ä»€ä¹ˆæ°´å¹³ï¼Ÿ

ğŸ¤– AIå›ç­”:
4.11å…‹/å¨çš„é‡‘å“ä½åœ¨è¡Œä¸šå†…å±äºä¸­ç­‰åä¸Šæ°´å¹³...
```

## ğŸ”§ æ”¯æŒçš„æ¨¡å‹

### Gemini æ¨¡å‹
- `gemini-2.5-flash`ï¼ˆé»˜è®¤ï¼Œé€Ÿåº¦å¿«ï¼‰
- `gemini-2.5-pro`ï¼ˆè´¨é‡é«˜ï¼‰
- æ”¯æŒè‡ªå®šä¹‰æ¨¡å‹åç§°

### OpenAI æ¨¡å‹
- `o4-mini`ï¼ˆé»˜è®¤ï¼Œç»æµå®ç”¨ï¼‰
- `o3`ï¼ˆå¹³è¡¡æ€§èƒ½ï¼‰
- `o3-pro`ï¼ˆæœ€é«˜è´¨é‡ï¼‰
- æ”¯æŒè‡ªå®šä¹‰æ¨¡å‹åç§°

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æ–‡ä»¶ç»“æ„
```
mining_file_recognize/
â”œâ”€â”€ mining_report_extractor_with_conversation.py  # ğŸŒŸ ä¸»ç¨‹åºï¼ˆå«å¯¹è¯åŠŸèƒ½ï¼‰
â”œâ”€â”€ mining_report_extractor_unified.py            # ç»Ÿä¸€ç‰ˆæœ¬ï¼ˆæ— å¯¹è¯ï¼‰
â”œâ”€â”€ mining_report_extractor_gemini.py             # Gemini ä¸“ç”¨ç‰ˆæœ¬
â”œâ”€â”€ mining_report_extractor_openai.py             # OpenAI ä¸“ç”¨ç‰ˆæœ¬
â”œâ”€â”€ OpenAI_APIs_for_conversation_state.py         # OpenAI å¯¹è¯ API ç¤ºä¾‹
â”œâ”€â”€ .env                                           # API å¯†é’¥é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt                               # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ README.md                                     # é¡¹ç›®è¯´æ˜
â””â”€â”€ dataset/
    â””â”€â”€ json_format.txt                           # è¾“å‡ºæ ¼å¼ç¤ºä¾‹
```

### æ ¸å¿ƒæ¶æ„è®¾è®¡

```python
# æŠ½è±¡åŸºç±»
class BaseMiningReportExtractor(ABC):
    @abstractmethod
    def extract_from_file(self, file_path: str) -> MiningReport:
        pass

# å…·ä½“å®ç°
class GeminiMiningReportExtractor(BaseMiningReportExtractor):
    # Gemini API å®ç°

class OpenAIMiningReportExtractorWithConversation(BaseMiningReportExtractor):
    # OpenAI API å®ç° + å¯¹è¯åŠŸèƒ½
    def start_conversation(self, conversation_model: Optional[str] = None):
        # å¤šè½®å¯¹è¯å®ç°
```

## ğŸ“Š è¾“å‡ºæ ¼å¼ç¤ºä¾‹

```json
{
  "æŠ¥å‘Šä¿¡æ¯": {
    "æŠ¥å‘Šåç§°": "å››å·çœçŸ³æ£‰å¿è–›å®¶å´–é‡‘çŸ¿è¯¦æŸ¥æŠ¥å‘Š",
    "ç¼–åˆ¶å•ä½": "å››å·çœåœ°è´¨çŸ¿äº§å‹˜æŸ¥å¼€å‘å±€åŒºåŸŸåœ°è´¨è°ƒæŸ¥é˜Ÿ",
    "ç¼–åˆ¶æ—¥æœŸ": "äºŒã€‡ä¸€å…«å¹´å…­æœˆ"
  },
  "çŸ¿æƒä¿¡æ¯": {
    "çŸ¿æƒåç§°": "è–›å®¶å´–é‡‘çŸ¿",
    "çŸ¿æƒä½ç½®": "å››å·çœçŸ³æ£‰å¿",
    "å‹˜æŸ¥ç¨‹åº¦": "è¯¦æŸ¥",
    "çŸ¿æƒç±»å‹": "æ¢çŸ¿æƒ",
    "çŸ¿æƒç¼–å·": "T51120100102038390",
    "çŸ¿æƒèµ·å§‹æ—¥æœŸ": "2018å¹´2æœˆ15æ—¥",
    "çŸ¿æƒæˆªæ­¢æ—¥æœŸ": "2020å¹´2æœˆ15æ—¥",
    "ç”Ÿäº§è§„æ¨¡": null,
    "çŸ¿åŒºé¢ç§¯": "1.06kmÂ²",
    "çŸ¿åŒºæµ·æ‹”": "2800-3200m",
    "ä»¥å¾€å‹˜æŸ¥å·¥ä½œ": "åŒºåŸŸåœ°è´¨è°ƒæŸ¥ã€åŒ–æ¢ã€ç‰©æ¢ç­‰å‰æœŸå·¥ä½œ"
  },
  "èµ„æºä¿¡æ¯": [
    {
      "çŸ¿ç§": "é‡‘çŸ¿",
      "èµ„æºé‡æƒ…å†µ": {
        "æ¨æ–­èµ„æºé‡": {
          "çŸ¿çŸ³é‡": "23.5ä¸‡å¨",
          "é‡‘å±é‡": "965kg",
          "å“ä½": "4.11g/t"
        },
        "æ§åˆ¶èµ„æºé‡": {
          "çŸ¿çŸ³é‡": "15.2ä¸‡å¨",
          "é‡‘å±é‡": "624kg",
          "å“ä½": "4.11g/t"
        },
        "æ€»è®¡": {
          "çŸ¿çŸ³é‡": "38.7ä¸‡å¨",
          "é‡‘å±é‡": "1589kg",
          "å“ä½": "4.11g/t"
        }
      }
    }
  ],
  "çŸ¿ä½“åˆ†å¸ƒ": [
    {
      "çŸ¿ä½“ç¼–å·": "â… å·çŸ¿ä½“",
      "çŸ¿ä½“åç§°": "ä¸»çŸ¿ä½“",
      "çŸ¿ä½“é•¿åº¦": "800m",
      "çŸ¿ä½“å®½åº¦": "200m",
      "çŸ¿ä½“åšåº¦": "3.5m",
      "çŸ¿ä½“èµ°å‘": "NE45Â°",
      "çŸ¿ä½“å€¾è§’": "60Â°",
      "çŸ¿ä½“é¢ç§¯": "0.16kmÂ²",
      "çŸ¿ä½“å“ä½": "4.2g/t"
    }
  ],
  "å…¶å®ƒä¿¡æ¯": "çŸ¿åºŠç±»å‹ä¸ºçŸ³è‹±è„‰å‹é‡‘çŸ¿ï¼ŒæˆçŸ¿åœ°è´¨æ¡ä»¶è‰¯å¥½..."
}
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ‰©å±•æ–°çš„ AI æœåŠ¡å•†

1. ç»§æ‰¿ `BaseMiningReportExtractor` ç±»
2. å®ç° `extract_from_file` æ–¹æ³•
3. åœ¨ `create_extractor` å·¥å‚å‡½æ•°ä¸­æ·»åŠ æ–°çš„åˆ†æ”¯

### è‡ªå®šä¹‰æ•°æ®æ¨¡å‹

ä¿®æ”¹ Pydantic æ¨¡å‹ä»¥é€‚åº”ç‰¹å®šéœ€æ±‚ï¼š
```python
class CustomReportInfo(BaseModel):
    # æ·»åŠ è‡ªå®šä¹‰å­—æ®µ
    custom_field: Optional[str] = None
```

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•è·å– API å¯†é’¥ï¼Ÿ
**A**: 
- **OpenAI**: è®¿é—® [OpenAI Platform](https://platform.openai.com/) æ³¨å†Œå¹¶è·å– API å¯†é’¥
- **Gemini**: è®¿é—® [Google AI Studio](https://makersuite.google.com/) è·å– API å¯†é’¥

### Q: å“ªä¸ª AI æœåŠ¡å•†æ•ˆæœæ›´å¥½ï¼Ÿ
**A**: 
- **Gemini**: å¤„ç†ä¸­æ–‡æ–‡æ¡£æ•ˆæœå¥½ï¼Œé€Ÿåº¦å¿«ï¼Œæˆæœ¬ä½
- **OpenAI**: ä¿¡æ¯ç†è§£èƒ½åŠ›å¼ºï¼Œæ”¯æŒå¯¹è¯åŠŸèƒ½ï¼Œé€‚åˆå¤æ‚æŸ¥è¯¢

### Q: å¯¹è¯åŠŸèƒ½æ”¯æŒå“ªäº›é—®é¢˜ï¼Ÿ
**A**: 
- æŠ¥å‘Šå†…å®¹æŸ¥è¯¢ï¼ˆèµ„æºé‡ã€çŸ¿æƒä¿¡æ¯ç­‰ï¼‰
- æ•°æ®è§£é‡Šå’Œåˆ†æ
- ä¸“ä¸šæœ¯è¯­è§£é‡Š
- çŸ¿å±±è¯„ä¼°å»ºè®®
- ä»»ä½•åŸºäºå·²ä¸Šä¼ æŠ¥å‘Šçš„é—®é¢˜

### Q: æ–‡ä»¶å¤§å°æœ‰é™åˆ¶å—ï¼Ÿ
**A**: 
- **Gemini**: è‡ªåŠ¨å¤„ç†å¤§æ–‡ä»¶ï¼ˆ>20MB ä½¿ç”¨ File APIï¼‰
- **OpenAI**: æ”¯æŒå¤§æ–‡ä»¶ä¸Šä¼ 

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ [GitHub Issue](https://github.com/your-username/mining_file_recognize/issues)
- å‘é€é‚®ä»¶è‡³ï¼šyour-email@example.com

## ğŸ”„ æ›´æ–°æ—¥å¿—

### v2.0.0 (æœ€æ–°)
- âœ¨ æ–°å¢ OpenAI å¤šè½®å¯¹è¯åŠŸèƒ½
- ğŸ¯ æ”¯æŒå¯¹è¯å‰é€‰æ‹©ä¸åŒæ¨¡å‹
- ğŸ”§ ä¼˜åŒ–ä»£ç ç»“æ„å’Œé”™è¯¯å¤„ç†
- ğŸ“ å®Œå–„æ–‡æ¡£å’Œç¤ºä¾‹

### v1.0.0
- ğŸš€ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ¤– æ”¯æŒ Gemini å’Œ OpenAI åŒ AI æœåŠ¡å•†
- ğŸ“Š å®Œæ•´çš„çŸ¿å±±æŠ¥å‘Šä¿¡æ¯æå–åŠŸèƒ½
- ğŸ—‚ï¸ ç»“æ„åŒ–æ•°æ®è¾“å‡º

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼**

**ä½œè€…**: Karl Liu  
**è”ç³»**: [GitHub Issues](https://github.com/Karl-Liu94/mining_file_recognize/issues)  
**é¡¹ç›®åœ°å€**: [mining_file_recognize](https://github.com/Karl-Liu94/mining_file_recognize.git) 
**é¡¹ç›®åœ°å€**: [mining_file_recognize](https://github.com/Karl-Liu94/mining_file_recognize.git) 