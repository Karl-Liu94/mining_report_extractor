# çŸ¿å±±å‚¨é‡æ ¸å®æŠ¥å‘Šä¿¡æ¯æå–å™¨ ğŸ”ï¸

ä¸€ä¸ªåŸºäºAIå¤§æ¨¡å‹çš„æ™ºèƒ½PDFæ–‡æ¡£ä¿¡æ¯æå–å·¥å…·ï¼Œä¸“é—¨ç”¨äºä»çŸ¿å±±å‚¨é‡æ ¸å®æŠ¥å‘Šä¸­æå–ç»“æ„åŒ–ä¿¡æ¯ã€‚æ”¯æŒ**Gemini**å’Œ**OpenAI**ä¸¤å¤§AIæœåŠ¡å•†ï¼Œç”¨æˆ·å¯æ ¹æ®éœ€è¦è‡ªç”±é€‰æ‹©ã€‚

## ğŸŒŸ ä¸»è¦ç‰¹æ€§

- **ğŸ¤– åŒAIæ”¯æŒ**ï¼šæ”¯æŒGoogle Geminiå’ŒOpenAIä¸¤å¤§AIæœåŠ¡å•†
- **ğŸ¯ æ™ºèƒ½æ¨¡å‹é€‰æ‹©**ï¼šæä¾›é¢„è®¾æ¨¡å‹åˆ—è¡¨ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¨¡å‹åç§°  
- **ğŸ“„ æ™ºèƒ½PDFè§£æ**ï¼šå¼ºå¤§çš„æ–‡æ¡£ç†è§£å’Œä¿¡æ¯æå–èƒ½åŠ›
- **ğŸ”§ ç»Ÿä¸€APIæ¥å£**ï¼šæ— è®ºä½¿ç”¨å“ªç§AIï¼Œè°ƒç”¨æ–¹å¼å®Œå…¨ä¸€è‡´
- **ğŸ—‚ï¸ ç»“æ„åŒ–è¾“å‡º**ï¼šä½¿ç”¨Pydanticæ¨¡å‹ç¡®ä¿æ•°æ®è´¨é‡å’Œä¸€è‡´æ€§
- **ğŸ‡¨ğŸ‡³ ä¸­æ–‡ä¼˜åŒ–**ï¼šä¸“é—¨é’ˆå¯¹ä¸­æ–‡çŸ¿å±±æŠ¥å‘Šè¿›è¡Œä¼˜åŒ–
- **ğŸ’ å¤šçŸ¿ç§æ”¯æŒ**ï¼šæ”¯æŒä¸»çŸ¿ç§å’Œä¼´ç”ŸçŸ¿ç§çš„èµ„æºé‡ç»Ÿè®¡
- **ğŸ“Š å®Œæ•´ä¿¡æ¯è¦†ç›–**ï¼šæå–æŠ¥å‘Šä¿¡æ¯ã€çŸ¿æƒä¿¡æ¯ã€èµ„æºä¿¡æ¯ç­‰å…¨é¢æ•°æ®
- **ğŸ”’ å®‰å…¨é…ç½®**ï¼šä½¿ç”¨.envæ–‡ä»¶ç»Ÿä¸€ç®¡ç†APIå¯†é’¥

## ğŸ“‹ æå–ä¿¡æ¯ç±»å‹

### æŠ¥å‘Šä¿¡æ¯
- æŠ¥å‘Šåç§°
- ç¼–åˆ¶å•ä½  
- ç¼–åˆ¶æ—¥æœŸ

### çŸ¿æƒä¿¡æ¯
- çŸ¿æƒåç§°
- çŸ¿æƒä½ç½®
- å‹˜æŸ¥ç¨‹åº¦ï¼ˆæ™®æŸ¥/è¯¦æŸ¥/å‹˜æ¢ï¼‰
- çŸ¿æƒç±»å‹ï¼ˆæ¢çŸ¿æƒ/é‡‡çŸ¿æƒï¼‰
- çŸ¿æƒç¼–å·
- çŸ¿æƒèµ·å§‹/æˆªæ­¢æ—¥æœŸ
- ç”Ÿäº§è§„æ¨¡
- çŸ¿åŒºé¢ç§¯
- çŸ¿åŒºæµ·æ‹”
- ä»¥å¾€å‹˜æŸ¥å·¥ä½œ

### èµ„æºä¿¡æ¯
- çŸ¿ç§ï¼ˆé‡‘çŸ¿ã€é“œçŸ¿ã€é“¶çŸ¿ç­‰ï¼‰
- èµ„æºé‡åˆ†ç±»ç»Ÿè®¡ï¼š
  - æ¨æ–­èµ„æºé‡ï¼ˆ333ç±»åˆ«ï¼‰
  - æ§åˆ¶èµ„æºé‡ï¼ˆ332ç±»åˆ«ï¼‰
  - æ¢æ˜èµ„æºé‡ï¼ˆ331ç±»åˆ«ç­‰ï¼‰
  - æ€»è®¡
- æ¯ä¸ªç±»åˆ«åŒ…å«ï¼šçŸ¿çŸ³é‡ã€é‡‘å±é‡ã€å“ä½

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Google Gemini APIå¯†é’¥ æˆ– OpenAI APIå¯†é’¥ï¼ˆè‡³å°‘ä¸€ä¸ªï¼‰

### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

æˆ–æ‰‹åŠ¨å®‰è£…ï¼š

```bash
# åŸºç¡€ä¾èµ–
pip install pydantic python-dotenv

# å¦‚æœä½¿ç”¨Gemini
pip install google-genai

# å¦‚æœä½¿ç”¨OpenAI  
pip install openai
```

### é…ç½®APIå¯†é’¥

1. **å¤åˆ¶å¹¶ç¼–è¾‘.envæ–‡ä»¶**ï¼š
```bash
cp .env.example .env  # å¦‚æœæœ‰ç¤ºä¾‹æ–‡ä»¶
# æˆ–ç›´æ¥ç¼–è¾‘.envæ–‡ä»¶
```

2. **åœ¨.envæ–‡ä»¶ä¸­å¡«å…¥æ‚¨çš„APIå¯†é’¥**ï¼š
```bash
# APIå¯†é’¥é…ç½®æ–‡ä»¶
# è¯·å¡«å…¥æ‚¨çš„å®é™…APIå¯†é’¥ï¼Œå»æ‰æ³¨é‡Šç¬¦å·#

# OpenAI APIå¯†é’¥
OPENAI_API_KEY=your_openai_api_key_here

# Gemini APIå¯†é’¥  
GEMINI_API_KEY=your_gemini_api_key_here
```

### äº¤äº’å¼ä½¿ç”¨ï¼ˆæ¨èï¼‰

```bash
python mining_report_extractor_unified.py
```

ç¨‹åºä¼šå¼•å¯¼æ‚¨ï¼š
1. é€‰æ‹©AIæœåŠ¡å•†ï¼ˆGemini/OpenAIï¼‰
2. é€‰æ‹©å…·ä½“æ¨¡å‹
3. è¾“å…¥PDFæ–‡ä»¶è·¯å¾„
4. è‡ªåŠ¨å¤„ç†å¹¶æ˜¾ç¤ºç»“æœ

### ç¼–ç¨‹å¼ä½¿ç”¨

```python
from mining_report_extractor_unified import create_extractor

# æ–¹å¼1ï¼šäº¤äº’å¼é€‰æ‹©
extractor = create_extractor()
result = extractor.extract_from_file("your_report.pdf")

# æ–¹å¼2ï¼šç›´æ¥æŒ‡å®š
extractor = create_extractor("gemini", "gemini-2.5-flash")
result = extractor.extract_from_file("your_report.pdf")

# æ–¹å¼3ï¼šå¿«é€Ÿæå–
from mining_report_extractor_unified import quick_extract
data = quick_extract("your_report.pdf", "openai", "o3")
```

## ğŸ”§ æ”¯æŒçš„æ¨¡å‹

### Gemini æ¨¡å‹
- `gemini-2.5-flash`ï¼ˆé»˜è®¤ï¼Œé€Ÿåº¦å¿«ï¼‰
- `gemini-2.5-pro`ï¼ˆè´¨é‡é«˜ï¼‰
- æ”¯æŒè‡ªå®šä¹‰æ¨¡å‹åç§°

### OpenAI æ¨¡å‹  
- `o4-mini`ï¼ˆç»æµå®ç”¨ï¼‰
- `o3`ï¼ˆå¹³è¡¡æ€§èƒ½ï¼‰
- `o3-pro`ï¼ˆæœ€é«˜è´¨é‡ï¼‰
- æ”¯æŒè‡ªå®šä¹‰æ¨¡å‹åç§°

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æ–‡ä»¶ç»“æ„
```
mining_file_recognize/
â”œâ”€â”€ mining_report_extractor_unified.py    # ğŸŒŸ ç»Ÿä¸€å…¥å£ï¼ˆæ¨èä½¿ç”¨ï¼‰
â”œâ”€â”€ mining_report_extractor_gemini.py     # Geminiä¸“ç”¨ç‰ˆæœ¬
â”œâ”€â”€ mining_report_extractor_openai.py     # OpenAIä¸“ç”¨ç‰ˆæœ¬
â”œâ”€â”€ .env                                   # APIå¯†é’¥é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt                       # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ README.md                             # é¡¹ç›®è¯´æ˜
â””â”€â”€ dataset/
    â””â”€â”€ json_format.txt                   # è¾“å‡ºæ ¼å¼ç¤ºä¾‹
```

### æ ¸å¿ƒæ¶æ„è®¾è®¡

```python
# æŠ½è±¡åŸºç±»
class BaseMiningReportExtractor(ABC):
    @abstractmethod
    def extract_from_file(self, file_path: str) -> MiningReport:
        pass

# å…·ä½“å®ç°
class GeminiMiningReportExtractor(BaseMiningReportExtractor):
    # Gemini APIå®ç°
    
class OpenAIMiningReportExtractor(BaseMiningReportExtractor):  
    # OpenAI APIå®ç°

# å·¥å‚å‡½æ•°
def create_extractor(provider: str, model: str) -> BaseMiningReportExtractor:
    # æ ¹æ®å‚æ•°åˆ›å»ºå¯¹åº”çš„æå–å™¨å®ä¾‹
```

## ğŸ“Š è¾“å‡ºæ ¼å¼ç¤ºä¾‹

```json
{
  "æŠ¥å‘Šä¿¡æ¯": {
    "æŠ¥å‘Šåç§°": "å››å·çœçŸ³æ£‰å¿è–›å®¶å´–é‡‘çŸ¿è¯¦æŸ¥æŠ¥å‘Š",
    "ç¼–åˆ¶å•ä½": "å››å·çœåœ°è´¨çŸ¿äº§å‹˜æŸ¥å¼€å‘å±€åŒºåŸŸåœ°è´¨è°ƒæŸ¥é˜Ÿ", 
    "ç¼–åˆ¶æ—¥æœŸ": "äºŒã€‡ä¸€å…«å¹´å…­æœˆ"
  },
  "çŸ¿æƒä¿¡æ¯": {
    "çŸ¿æƒåç§°": "è–›å®¶å´–é‡‘çŸ¿",
    "çŸ¿æƒä½ç½®": "å››å·çœçŸ³æ£‰å¿",
    "å‹˜æŸ¥ç¨‹åº¦": "è¯¦æŸ¥",
    "çŸ¿æƒç±»å‹": "æ¢çŸ¿æƒ",
    "çŸ¿æƒç¼–å·": "T51120100102038390",
    "çŸ¿æƒèµ·å§‹æ—¥æœŸ": "2018å¹´2æœˆ15æ—¥",
    "çŸ¿æƒæˆªæ­¢æ—¥æœŸ": "2020å¹´2æœˆ15æ—¥",
    "ç”Ÿäº§è§„æ¨¡": null,
    "çŸ¿åŒºé¢ç§¯": "1.06kmÂ²",
    "çŸ¿åŒºæµ·æ‹”": "2800-3200m",
    "ä»¥å¾€å‹˜æŸ¥å·¥ä½œ": "åŒºåŸŸåœ°è´¨è°ƒæŸ¥ã€åŒ–æ¢ã€ç‰©æ¢ç­‰å‰æœŸå·¥ä½œ"
  },
  "èµ„æºä¿¡æ¯": [
    {
      "çŸ¿ç§": "é‡‘çŸ¿",
      "èµ„æºé‡æƒ…å†µ": {
        "æ¨æ–­èµ„æºé‡": {
          "çŸ¿çŸ³é‡": "23.5ä¸‡å¨",
          "é‡‘å±é‡": "965kg", 
          "å“ä½": "4.11g/t"
        },
        "æ§åˆ¶èµ„æºé‡": {
          "çŸ¿çŸ³é‡": "20.3ä¸‡å¨",
          "é‡‘å±é‡": "1263kg",
          "å“ä½": "6.22g/t"
        },
        "æ¢æ˜èµ„æºé‡": null,
        "æ€»è®¡": {
          "çŸ¿çŸ³é‡": "43.8ä¸‡å¨", 
          "é‡‘å±é‡": "2228kg",
          "å“ä½": "5.09g/t"
        }
      }
    }
  ],
  "å…¶å®ƒä¿¡æ¯": "è¯¥çŸ¿åºŠå…·æœ‰è‰¯å¥½çš„å¼€å‘å‰æ™¯..."
}
```

## ğŸ› ï¸ APIå‚è€ƒ

### æ ¸å¿ƒç±»

#### `BaseMiningReportExtractor`ï¼ˆæŠ½è±¡åŸºç±»ï¼‰
æ‰€æœ‰æå–å™¨çš„ç»Ÿä¸€æ¥å£ã€‚

#### `GeminiMiningReportExtractor`
åŸºäºGoogle Geminiçš„å®ç°ã€‚
- è‡ªåŠ¨æ–‡ä»¶å¤§å°æ£€æµ‹ï¼ˆ>20MBä½¿ç”¨File APIï¼‰
- æ”¯æŒå¤šç§Geminiæ¨¡å‹

#### `OpenAIMiningReportExtractor`  
åŸºäºOpenAIçš„å®ç°ã€‚
- æ–‡ä»¶è‡ªåŠ¨ä¸Šä¼ å’Œæ¸…ç†
- æ”¯æŒç»“æ„åŒ–è¾“å‡º

### ä¸»è¦æ–¹æ³•

```python
# åŸºç¡€æå–
result = extractor.extract_from_file("file.pdf")

# æå–ä¸ºå­—å…¸æ ¼å¼
data = extractor.extract_to_dict("file.pdf") 

# æå–å¹¶ä¿å­˜
success = extractor.extract_and_save("file.pdf", "output.json")

# ä¿å­˜å·²æœ‰ç»“æœ
extractor.save_result(result, "output.json")

# æ‰“å°ç¾è§‚æ‘˜è¦
extractor.print_summary(result)
```

### å·¥å‚å‡½æ•°

```python
# äº¤äº’å¼åˆ›å»º
extractor = create_extractor()

# ç›´æ¥æŒ‡å®š
extractor = create_extractor("gemini", "gemini-2.5-flash")
extractor = create_extractor("openai", "o3")

# ä¾¿æ·å‡½æ•°
data = quick_extract("file.pdf", "gemini", "gemini-2.5-pro")
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### Geminiä¼˜åŒ–
- **æ™ºèƒ½æ–‡ä»¶ä¸Šä¼ **ï¼šå°æ–‡ä»¶(<20MB)ç›´æ¥ä¸Šä¼ ï¼Œå¤§æ–‡ä»¶ä½¿ç”¨File API
- **æ¨¡å‹é€‰æ‹©**ï¼šFlashç‰ˆæœ¬é€Ÿåº¦æ›´å¿«ï¼ŒProç‰ˆæœ¬è´¨é‡æ›´é«˜

### OpenAIä¼˜åŒ–  
- **è‡ªåŠ¨æ–‡ä»¶ç®¡ç†**ï¼šå¤„ç†å®Œæˆåè‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- **ç»“æ„åŒ–è¾“å‡º**ï¼šä½¿ç”¨æœ€æ–°çš„ç»“æ„åŒ–è¾“å‡ºAPIç¡®ä¿æ ¼å¼æ­£ç¡®

### é€šç”¨ä¼˜åŒ–
- **å•æ¬¡AIè°ƒç”¨**ï¼šé¿å…é‡å¤è°ƒç”¨å¤§æ¨¡å‹
- **ç»Ÿä¸€æ•°æ®æ¨¡å‹**ï¼šç¡®ä¿ä¸åŒAIçš„è¾“å‡ºæ ¼å¼å®Œå…¨ä¸€è‡´

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

1. **APIå¯†é’¥å®‰å…¨**ï¼š
   - å°†`.env`æ·»åŠ åˆ°`.gitignore`
   - ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç APIå¯†é’¥
   - å¦¥å–„ä¿ç®¡æ‚¨çš„APIå¯†é’¥

2. **æ–‡ä»¶å¤„ç†**ï¼š
   - ä»…æ”¯æŒPDFæ ¼å¼
   - ç¡®ä¿æ–‡ä»¶å®Œæ•´æ€§
   - æ³¨æ„æ–‡ä»¶å¤§å°é™åˆ¶

3. **ç½‘ç»œè¦æ±‚**ï¼š
   - éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥
   - ç¡®ä¿èƒ½è®¿é—®å¯¹åº”çš„AIæœåŠ¡

## ğŸš© æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: æç¤º"è¯·å®‰è£…å¿…éœ€åŒ…"é”™è¯¯**
```bash
# å®‰è£…Geminiä¾èµ–
pip install google-genai python-dotenv

# å®‰è£…OpenAIä¾èµ–  
pip install openai python-dotenv
```

**Q: APIå¯†é’¥é”™è¯¯**
- æ£€æŸ¥`.env`æ–‡ä»¶ä¸­çš„å¯†é’¥æ˜¯å¦æ­£ç¡®
- ç¡®è®¤å·²å»æ‰æ³¨é‡Šç¬¦å·`#`
- éªŒè¯å¯†é’¥æ˜¯å¦æœ‰æ•ˆä¸”æœ‰è¶³å¤Ÿé¢åº¦

**Q: æ–‡ä»¶ä¸Šä¼ å¤±è´¥**
- æ£€æŸ¥PDFæ–‡ä»¶æ˜¯å¦æŸå
- ç¡®è®¤ç½‘ç»œè¿æ¥ç¨³å®š
- å°è¯•ä½¿ç”¨è¾ƒå°çš„æ–‡ä»¶æµ‹è¯•

**Q: è¾“å‡ºæ ¼å¼ä¸æ­£ç¡®**  
- ç¡®ä¿ä½¿ç”¨çš„æ˜¯æœ€æ–°ç‰ˆæœ¬çš„ä»£ç 
- æ£€æŸ¥æ¨¡å‹æ˜¯å¦æ”¯æŒç»“æ„åŒ–è¾“å‡º
- å°è¯•æ›´æ¢æ¨¡å‹

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»ºPull Request

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§[LICENSE](LICENSE)æ–‡ä»¶

## ğŸ™ è‡´è°¢

- [Google Gemini](https://deepmind.google/technologies/gemini/) - å¼ºå¤§çš„AIæ¨¡å‹æ”¯æŒ
- [OpenAI](https://openai.com/) - å…ˆè¿›çš„è¯­è¨€æ¨¡å‹API
- [Pydantic](https://pydantic.dev/) - æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
- æ‰€æœ‰ä¸ºçŸ¿ä¸šæ•°å­—åŒ–è½¬å‹è´¡çŒ®åŠ›é‡çš„å¼€å‘è€…ä»¬

---

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªâ­æ˜Ÿæ ‡æ”¯æŒï¼**

**ä½œè€…**: Karl Liu  
**è”ç³»**: [GitHub Issues](https://github.com/Karl-Liu94/mining_file_recognize/issues)  
**é¡¹ç›®åœ°å€**: [mining_file_recognize](https://github.com/Karl-Liu94/mining_file_recognize.git) 